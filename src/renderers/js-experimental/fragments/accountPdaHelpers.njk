{% import "templates/macros.njk" as macros %}

export async function {{ fetchFromSeedsFunction }}(
  rpc: Parameters<typeof fetchEncodedAccount>[0],
  {% if hasVariableSeeds %}
    seeds: {{ accountSeedsType }},
  {% endif %}
  config: FetchAccountConfig & { programAddress?: Address } = {},
): Promise<{{ accountType }}> {
  const { programAddress, ...fetchConfig } = config;
  const [address] = await {{ findPdaFunction }}({% if hasVariableSeeds %}seeds, {% endif %}{ programAddress });
  return {{ fetchFunction }}(rpc, address, fetchConfig);
}

export async function {{ safeFetchFromSeedsFunction }}(
  rpc: Parameters<typeof fetchEncodedAccount>[0],
  {% if hasVariableSeeds %}
    seeds: {{ accountSeedsType }},
  {% endif %}
  config: FetchAccountConfig & { programAddress?: Address } = {},
): Promise<{{ accountType }} | null> {
  const { programAddress, ...fetchConfig } = config;
  const [address] = await {{ findPdaFunction }}({% if hasVariableSeeds %}seeds, {% endif %}{ programAddress });
  return {{ safeFetchFunction }}(rpc, address, fetchConfig);
}
