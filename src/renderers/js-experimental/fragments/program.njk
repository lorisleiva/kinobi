{% import "templates/macros.njk" as macros %}

export const {{ programAddressConstant }} = '{{ program.publicKey }}' as Base58EncodedAddress<'{{ program.publicKey }}'>;

{{ macros.docblock(program.docs) }}
export type {{ program.name | pascalCase }}Program = Program<'{{ program.publicKey }}'>
{%- if program.errors.length > 0 %}
  & ProgramWithErrors<{{ programErrorName }}Code, {{ programErrorName }}>
{% endif %}
;

export function create{{ program.name | pascalCase }}Program(): {{ program.name | pascalCase }}Program {
  return {
    name: '{{ program.name | camelCase }}',
    address: {{ programAddressConstant }},
    {% if program.errors.length > 0 %}
      getErrorFromCode(code: {{ programErrorName }}Code, cause?: Error) {
        return get{{ programErrorName }}FromCode(code, cause);
      },
    {% endif %}
  };
}

export async function get{{ program.name | pascalCase }}ProgramAddress(context: Pick<Context, 'getProgramAddress'> = {}): Promise<Base58EncodedAddress> {
  return getProgramAddress(context, "{{ program.name | camelCase }}", {{ programAddressConstant }});
}
